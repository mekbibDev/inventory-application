extends layout

block content
  main
    h1 Categories
    form( method="get" action="/filter" )
      label(for="category-select") Select Category
      select(name="category" id="category-select" required)
        unless selectedCategory
          option(value="") Select a category
        each category in categories
          option(value= category._id selected=selectedCategory && selectedCategory._id.toString()  === category._id.toString() ? true : false) !{category.name}  
      button(type="submit") filter
    a(href="category/create") create category
    br
    a(href="category/details") show category details
    br
    if selectedCategory 
      a(href="/") Show All Gadgets
    h1 Gadgets
    a(href="gadget/create") create gadget
    each gadget in gadgets
      ul 
        li !{gadget.name}
          ul
            li Description: !{gadget.description}
            li Price: !{gadget.price}
            li Stock: !{gadget.stock}
            li category:
              ul 
                each category in gadget.categories
                  li !{category.name}
        li 
          a(href=`/gadget/${gadget._id.toString()}/edit`) Edit Gadget
    if gadgets.length === 0
      h1 No gadgets exist in this category
      a(href="/gadget/create") Create new Gadget? 
